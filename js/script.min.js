var showBtn=document.querySelector("#show-onmap-search-form"),formContainer=document.querySelector(".onmap-search-form"),form=formContainer.querySelector("form"),adultsCount=form.querySelector("[name=adults-count]"),childrenCount=form.querySelector("[name=children-count]"),peopleCount=form.querySelector(".people-count-row"),arrivalDate=form.querySelector("[name=arrival-date]"),departureDate=form.querySelector("[name=departure-date]"),today=new Date,tomorrow=new Date(today.getFullYear(),today.getMonth(),today.getDate()+1),dateDisplayMode={day:"numeric",month:"long"},todayDate=today.toLocaleDateString("ru-RU",dateDisplayMode),tomorrowDate=tomorrow.toLocaleDateString("ru-RU",dateDisplayMode);formContainer.classList.add("hidden"),arrivalDate.value=todayDate+" "+today.getFullYear(),departureDate.value=tomorrowDate+" "+today.getFullYear(),showBtn.addEventListener("click",function(){formContainer.classList.contains("show-hidden")?(formContainer.classList.add("slowly-hide"),formContainer.classList.remove("show-hidden")):(localStorage&&(adultsCount.value=localStorage.getItem("adults-count"),childrenCount.value=localStorage.getItem("children-count")),formContainer.classList.add("show-hidden"),formContainer.classList.remove("slowly-hide"))}),peopleCount.addEventListener("click",function(e){e.target.classList.contains("icon-plus")&&e.target.parentNode.querySelector("input").value++,e.target.classList.contains("icon-minus")&&e.target.parentNode.querySelector("input").value>0&&e.target.parentNode.querySelector("input").value--,(isNaN(++e.target.parentNode.querySelector("input").value)||isNaN(--e.target.parentNode.querySelector("input").value))&&(e.target.parentNode.querySelector("input").value=1)}),form.addEventListener("submit",function(e){var t=form.querySelectorAll("input");for(0==adultsCount.value&&(e.preventDefault(),adultsCount.classList.add("empty-input")),i=0;i<t.length;i++)t[i].value?localStorage.setItem(t[i].id,t[i].value):(e.preventDefault(),t[i].classList.add("empty-input"))}),form.addEventListener("click",function(e){e.target.classList.remove("empty-input")});
